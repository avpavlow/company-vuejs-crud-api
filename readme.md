## О проекте
Это API бекенда для проекта `https://github.com/avpavlow/vuejs-crud`, написанной на Laravel

# Что интересного в проекте. 
1. Генерация роутов `CRUD` из ресурсных файлов `app/Resources/CRUD.php`. В ресурсных файлах имеется класс CRUD с переменной `$resources` ,
в которой описываются префиксы, права доступа, пространства имен, контроллеры, экшены, используемые модели. Генерация маршрутов реализована в
файле `api.php`.

2. Проверка прав доступа реализована в 2-х посредниках:
    1. Посредник с ключом `role`, `Middleware/CheckRole`. На входе принимает параметр `$role`, что есть роль пользователя, использует id пользователя. По этим данным загружает объект
    `User`. Если пользователь с такой ролью существует, то разрешает выполнение запроса. Регистрируется данный посредник в конструкторах контроллеров
    `App\Http\Controllers\Crm`. Входной параметр $role имеет значения "update", "insert", "delete", "read".
    2.  Посредник с ключом `permission`, `Middleware/CheckPermission`. На входе принимает параметр `$permission`, что есть доступ к конкретному модулю ы строковой форме, использует
     id пользователя. По этим параметрам загружает объект `Permission` из БД. Потом по данному объекту  `Permission` делает вывод, имеет ли пользователь доступ к модулю.
    Регистрируется данный посредник в файле `api.php` динамически в ходе обрабортки `app/Resources/CRUD.php`, а также в контроллере `CRUDController`, клоторый является 
    универсальным контроллером для всех запросов.
Эти 2 посредника отличаются тем, что в 2-м случае проверяется доступ к конкретным методам CRUD, в том время как во 1-м случае проверка это
проверка вообще, имеет ли право пользователь на "update", "insert", "delete", "read" на все. 

3. Интересна работа контроллера `CRUDcontroller`, который является универсальным для всего Crm и может дублировать функционал контроллеров
из папки `App\Http\Controllers\Crm`.


## Требования
- PHP 7.x,
- Composer

## Установка
1. Склонируйте проект
2. Выполните:
    ```
    composer install
    ```
3. Создайте базу данных для проекта
4. Создайте .env файл из .env.example и сконфигурируйте проект,
5. Выполните:
    ```
    php artisan key:generate
    ```
8. Выполните:
    ```
    php artisan migrate
    ```
9. Выполните seeders
10. Для запуска сервера:
    ```
    php artisan serve
    ```
